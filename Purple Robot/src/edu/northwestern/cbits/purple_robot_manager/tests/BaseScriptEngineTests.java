package edu.northwestern.cbits.purple_robot_manager.tests;

import edu.northwestern.cbits.purple_robot_manager.scripting.BaseScriptEngine;
import edu.northwestern.cbits.purple_robot_manager.tests.JavascriptTestCase;
import junit.framework.Assert;
import android.content.Context;
import android.util.Log;

/**
 * Tests the methods in BaseScriptEngine.
 * @author mohrlab
 *
 */
public class BaseScriptEngineTests {
	private static final String CN = "BaseScriptEngineTests";
	private static final String persistValue = "T";

	
	
	public static void addModel(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void addNamespace(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void cancelScriptNotification(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void clearNativeDialogs(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void clearNativeDialogs_var01(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void clearNativeDialogs_var02(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void clearPassword(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void clearTriggers(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void dateFromTimestamp(Context ctx, int testCount) {
		String MN = "dateFromTimestamp";
//		Log.d(CN+"."+MN, JavascriptTestCase.fmtTestHeader(hdrTitle))
	}

	public static void deleteModel(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void deleteTrigger(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableAutoConfigUpdates(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableBackgroundImage(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableEachProbe(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableModel(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableProbe(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableProbes(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableTrigger(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void disableUpdateChecks(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void emitToast(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void emitToast_var01(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void emitToast_var02(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void enableAutoConfigUpdates(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void enableBackgroundImage(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void enableModel(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void enableProbe(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void enableProbes(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void enableTrigger(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void enableUpdateChecks(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchEncryptedString(Context ctx, int testCount) {
		fetchEncryptedString_var01(ctx, testCount);
	}

	public static void fetchEncryptedString_var01(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchEncryptedString_var02(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchLabel(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchLabels(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchNamespaceMap(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchNamespaces(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchSnapshotIds(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchString(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchString_var01(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchString_var02(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchTrigger(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchTriggerIds(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchUserHash(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fetchUserId(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void fireTrigger(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void formatDate(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void launchApplication(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void launchInternalUrl(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void launchUrl(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void log(Context ctx, int testCount) {
		String MN = "log";
//		Log.d(CN+"."+MN, JavascriptTestCase.fmtTestHeader("TEST " + testCount + ": " + MN));
//		StringBuilder sb = new StringBuilder();
//		sb.append("PurpleRobot.log('" + MN + ": test'); PurpleRobot.persistString('" + CN + "','" + MN + "','" + persistValue + "');");
//		BaseScriptEngine.runScript(ctx, sb.toString());
//		Assert.assertEquals(true, persistValue.equals(JavascriptTestCase.fetchString(ctx, CN, MN)));
		runTest(ctx, MN, testCount, "PurpleRobot.log('" + MN + ": test'); PurpleRobot.persistString('" + CN + "','" + MN + "','" + persistValue + "');", CN, MN, false, false);
	}

	public static void now(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void packageForApplicationName(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void parseDate(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void persistEncryptedString(Context ctx, int testCount) {
		persistEncryptedString_var01(ctx, testCount);
	}

	public static void runTest(Context ctx, String testMethodName, int testCount, String javascript, String jsStringPersistNamespace, String jsStringPersistKey, boolean isEncryptedString, boolean use2ParamFetchString) {
		String MN = testMethodName;
		Log.d(CN+"."+MN, JavascriptTestCase.fmtTestHeader("TEST " + testCount + ": " + MN));
		if(javascript != null) {
			StringBuilder sb = new StringBuilder();
			sb.append(javascript);
			BaseScriptEngine.runScript(ctx, sb.toString());
			if(isEncryptedString) {
				if(use2ParamFetchString) {
					Log.d(CN+"."+MN, "fetching result value 1...");
					Assert.assertEquals(true, persistValue.equals(JavascriptTestCase.fetchEncryptedString(ctx, jsStringPersistKey)));
				}
				else {
					Log.d(CN+"."+MN, "fetching result value 2...");
					Assert.assertEquals(true, persistValue.equals(JavascriptTestCase.fetchEncryptedString(ctx, jsStringPersistNamespace, jsStringPersistKey)));
				}
			}
			else {
				if(use2ParamFetchString) {
					Log.d(CN+"."+MN, "fetching result value 3...");
					Assert.assertEquals(true, persistValue.equals(JavascriptTestCase.fetchString(ctx, jsStringPersistKey)));
				}
				else {
					Log.d(CN+"."+MN, "fetching result value 4...");
					Assert.assertEquals(true, persistValue.equals(JavascriptTestCase.fetchString(ctx, jsStringPersistNamespace, jsStringPersistKey)));
				}
			}
		}
	}

	public static void persistEncryptedString_var01(Context ctx, int testCount) {
		String MN = "persistEncryptedString_var01";
		runTest(ctx, MN, testCount, "PurpleRobot.persistEncryptedString('" + CN + "','" + MN + "','" + persistValue + "');", CN, MN, true, false);
	}
	
	public static void persistEncryptedString_var02(Context ctx, int testCount) {
		String MN = "persistEncryptedString_var02";
		runTest(ctx, MN, testCount, "PurpleRobot.persistEncryptedString('" + CN + MN + "','" + persistValue + "');", null, CN+MN, true, true);
	}

	public static void persistString(Context ctx, int testCount) {
		String MN = "persistString";
		runTest(ctx, MN, testCount, "PurpleRobot.persistString('" + CN + MN + "','" + persistValue + "');", "", CN+MN, false, true);
	}

	public static void playDefaultTone(Context ctx, int testCount) {
		String MN = "playDefaultTone";
		runTest(ctx, MN, testCount, "PurpleRobot.playDefaultTone(); PurpleRobot.persistString('" + CN + "','" + MN + "','" + persistValue + "');", CN, MN, false, false);
	}

	public static void playTone(Context ctx, int testCount) {
		String MN = "playTone";
		runTest(ctx, MN, testCount, "PurpleRobot.playTone(null); PurpleRobot.persistString('" + CN + "','" + MN + "','" + persistValue + "');", CN, MN, false, false);
	}

	public static void probesState(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void readUrl(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void resetTrigger(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void restoreDefaultId(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void run(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void runScript(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void runScript_var01(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void runScript_var02(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void scheduleScript(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}
	
	public static void setPassword(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}
	
	public static void setUserId(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void showApplicationLaunchNotification(Context ctx,
			int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void showNativeDialog(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void showNativeDialog_var01(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void showNativeDialog_var02(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void showScriptNotification(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void showScriptNotification_var01(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void showScriptNotification_var02(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void testLog(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void updateConfig(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void updateConfigUrl(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void updateWidget(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void valueFromString(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void version(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void versionCode(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}

	public static void vibrate(Context ctx, int testCount) {
		String MN = "METHODNAME";		runTest(ctx, MN, testCount, null, CN, MN, true, false);
		
	}
	
}